{% extends 'base.html.twig' %}

{% block title %}VenteArticle{% endblock %}

{% block body %}
    {{ form_start(form) }}
    <div class="row">
        <div class="col-lg-3 col-md-4 col-sm-8">
            {{ form_row(form.mots) }}

        </div>
        <div class="col-lg-2 col-md-2 col-sm-4">
            {{ form_row(form.Rechercher) }}
        </div>
        <div class="col-lg-2 col-md-2">
            <button class="btn" style="background-color: rgba(164,135,4,0.83);color: white" href="{{ path('app_vente_film_index') }}">Historique</button>
        </div>

        <div class="col-lg-4 col-md-4 border-danger">
            <h2 style="text-align: center;background-color: rgba(211,174,7,0.83)">
                Vente des Article
            </h2>
        </div>
        <div class="col-lg-2 col-md-2 border-danger">
        </div>

    </div>
    {{ form_end(form) }}
    <div class="table-responsive">
        <table class="table table-bordered text-black" style="background-color: rgba(211,174,7,0.83)">
            <thead>
            <tr>
                <th>Id</th>
                <th>Nom</th>
                <th>Prix de Vente</th>
                <th>Image</th>
                <th>Quantite Restant</th>
                <th>Vente</th>
            </tr>
            </thead>
            <tbody>
            {% for article in articles %}
                <tr>
                    <td>{{ article.id }}</td>
                    <td>{{ article.nom }}</td>
                    <td>{{ article.price }} CFA</td>
                    <td class="w-5"><img style="width: 70px; height: 70px" class="img-fluid img-thumbnail" src="{{ vich_uploader_asset(article, 'imageFile') }}" alt="{{ article.nom }}"></td>
                    {% set restant=article.quantiteInitial - article.quantiteVendue %}
                    <td>{{ restant }}</td>
                    <td>
                        <form method="post" action="{{ path('buy', {'id': article.id})}}">
                            <input type="number" min="1" max="{{restant}}" required name="nom">
                            <button type="submit" class="btn btn-primary me-2">Vendue</button>
                        </form>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="7">no records found</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        {{ knp_pagination_render(articles,'pagination.html.twig') }}

    </div>

{% endblock %}
